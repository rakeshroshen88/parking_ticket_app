!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/2RN":function(e,r,i){"use strict";i.r(r),i.d(r,"DashboardPageModule",(function(){return N}));var a=i("ofXK"),o=i("3Pt+"),c=i("TEn/"),s=i("tyNb"),u=i("mrSG"),l=i("fXoL"),d=i("nCAS"),b=i("RFg5"),h=i("BHm0"),f=i("WdVq"),p=i("bmg4");function v(t,e){if(1&t&&(l.Pb(0,"h3",11),l.vc(1),l.cc(2,"date"),l.Ob()),2&t){var n=l.bc(2);l.xb(1),l.xc("Out Time: ",l.ec(2,1,null==n.userdetails?null:n.userdetails.time_out,"shortTime")," ")}}function g(t,e){if(1&t&&(l.Pb(0,"div"),l.Kb(1,"ngx-qrcode",16),l.Ob()),2&t){var n=l.bc(2);l.xb(1),l.hc("value",n.createdCode)}}function m(t,e){if(1&t&&(l.Pb(0,"div",5),l.Pb(1,"div",6),l.Kb(2,"img",7),l.Pb(3,"h3"),l.vc(4,"Parking Company Name"),l.Ob(),l.Pb(5,"h5",8),l.vc(6),l.Ob(),l.Pb(7,"h6",9),l.vc(8,"Parking Receipt"),l.Ob(),l.Pb(9,"h3",10),l.vc(10),l.cc(11,"date"),l.Ob(),l.Pb(12,"h3",11),l.vc(13),l.cc(14,"date"),l.Ob(),l.uc(15,v,3,4,"h3",12),l.Pb(16,"p",13),l.vc(17,"Charges: \u20a600.00 "),l.Ob(),l.Pb(18,"p",13),l.vc(19),l.Ob(),l.Ob(),l.Pb(20,"div",14),l.Pb(21,"p"),l.vc(22,"Thank you and drive Safaly"),l.Ob(),l.uc(23,g,2,1,"div",15),l.Ob(),l.Ob()),2&t){var n=l.bc();l.xb(6),l.xc("",null==n.userdetails?null:n.userdetails.car_number," "),l.xb(4),l.xc("",l.dc(11,6,null==n.userdetails?null:n.userdetails.time_in)," "),l.xb(3),l.xc("In Time: ",l.ec(14,8,null==n.userdetails?null:n.userdetails.time_in,"shortTime")," "),l.xb(2),l.hc("ngIf",null==n.userdetails?null:n.userdetails.time_out),l.xb(4),l.xc("Status: ",null==n.userdetails?null:n.userdetails.status," "),l.xb(4),l.hc("ngIf",n.createdCode)}}function P(t,e){if(1&t){var n=l.Qb();l.Pb(0,"button",19),l.Xb("click",(function(){return l.rc(n),l.bc(2).exit_car()})),l.Kb(1,"i",20),l.vc(2," Mark as Exit"),l.Ob()}}function k(t,e){if(1&t&&(l.Pb(0,"div",17),l.uc(1,P,3,0,"button",18),l.Ob()),2&t){var n=l.bc();l.xb(1),l.hc("ngIf",!(null!=n.userdetails&&n.userdetails.time_out))}}var y,O,C=((y=function(){function e(n,r,i,a,o,c,s){t(this,e),this.authService=n,this.stroageServices=r,this.router=i,this.alert=a,this.barcodeScanner=o,this.actiatedRoute=c,this.location=s,this.userData={car_number:""},this.qrData="",this.createdCode=null,this.scannedCode=null,this.electmentType="canvas";var u=this.actiatedRoute.snapshot.paramMap.get("id");this.userData.car_number=u,this.createdCode=u}return n(e,[{key:"ngOnInit",value:function(){this.createCode()}},{key:"createCode",value:function(){var t=this;this.authService.postData(this.userData,"get_car_details").then((function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.resposeData=e,this.resposeData.car_details?this.userdetails=this.resposeData.car_details:this.alert.notification(this.resposeData.error.text,"danger");case 1:case"end":return t.stop()}}),t,this)})))}),(function(e){t.alert.notification("No Internet Connection ","danger")})),console.log(this.createdCode)}},{key:"CloseModal",value:function(){this.location.back()}},{key:"exit_car",value:function(){var t=this;this.authService.postData(this.userData,"exit_car").then((function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.resposeData1=e,this.resposeData1.car_status?this.alert.notification(this.resposeData1.car_status.text,"success"):this.alert.notification(this.resposeData1.error.text,"danger");case 1:case"end":return t.stop()}}),t,this)})))}),(function(e){t.alert.notification("No Internet Connection ","danger")})),console.log(this.createdCode)}}]),e}()).\u0275fac=function(t){return new(t||y)(l.Jb(d.a),l.Jb(b.a),l.Jb(s.g),l.Jb(h.a),l.Jb(f.a),l.Jb(s.a),l.Jb(a.g))},y.\u0275cmp=l.Db({type:y,selectors:[["app-car-details"]],decls:9,vars:2,consts:[[1,"edithead"],["src","../../../assets/img/back-arrrow.png","alt","back Arrow",1,"backbutton",3,"click"],[1,"container"],["class","tabledetails",4,"ngIf"],["class","footer-btton",4,"ngIf"],[1,"tabledetails"],[1,"logoiconpar"],["src","../../../assets/img/parking_car_icon.png"],[1,"carnumber"],[1,"parkinghead"],[1,"date"],[1,"Intime"],["class","Intime",4,"ngIf"],[1,"carges"],[1,"thanknodes"],[4,"ngIf"],[2,"width","100%",3,"value"],[1,"footer-btton"],[3,"click",4,"ngIf"],[3,"click"],["aria-hidden","true",1,"fa","fa-car"]],template:function(t,e){1&t&&(l.Pb(0,"ion-header",0),l.Pb(1,"ion-toolbar"),l.Pb(2,"ion-title"),l.Pb(3,"img",1),l.Xb("click",(function(){return e.CloseModal()})),l.Ob(),l.vc(4," Parking Details "),l.Ob(),l.Ob(),l.Ob(),l.Pb(5,"ion-content"),l.Pb(6,"div",2),l.uc(7,m,24,11,"div",3),l.Ob(),l.Ob(),l.uc(8,k,2,1,"div",4)),2&t&&(l.xb(7),l.hc("ngIf",e.userdetails),l.xb(1),l.hc("ngIf",e.userdetails))},directives:[c.n,c.C,c.B,c.k,a.k,p.b],pipes:[a.d],styles:[""],encapsulation:2}),y),x=i("7uwA"),D=((O=function(){function e(n,r,i){t(this,e),this.btSerial=n,this.toastController=r,this.alertService=i}return n(e,[{key:"searchBluetoothPrinter",value:function(){return this.btSerial.list()}},{key:"connectToBluetoothPrinter",value:function(t){return this.btSerial.connect(t)}},{key:"disconnectBluetoothPrinter",value:function(){return this.btSerial.disconnect()}},{key:"sendToBluetoothPrinter",value:function(t,e){var n=this;this.connectToBluetoothPrinter(t).subscribe((function(t){n.btSerial.write(e).then((function(t){console.log("Print successful."),n.alertService.notification("Print successful","danger"),n.disconnectBluetoothPrinter()}),(function(t){console.log("there is an error printing to bluetooth printer"),n.alertService.notification("there is an error printing to bluetooth printer","danger")}))}),(function(t){n.alertService.notification("there is an error connecting to bluetooth printer","danger")}))}}]),e}()).\u0275fac=function(t){return new(t||O)(l.Tb(x.a),l.Tb(c.M),l.Tb(h.a))},O.\u0275prov=l.Fb({token:O,factory:O.\u0275fac,providedIn:"root"}),O);function _(t,e){if(1&t){var n=l.Qb();l.Pb(0,"ion-item",3),l.Xb("click",(function(){l.rc(n);var t=e.$implicit;return l.bc().selectPrinter(t.id)})),l.vc(1),l.Ob()}if(2&t){var r=e.$implicit;l.xb(1),l.yc(" ",r.name," ",r.id," ")}}var w,S=((w=function(){function e(n,r,i,a,o,c){t(this,e),this.barcodeScanner=n,this.bluetoothSerial=r,this.alertCtrl=i,this.barkodScanner=a,this.print=o,this.modalController=c,this.qrData="",this.createdCode=null,this.scannedCode=null,this.electmentType="canvas",this.bluetoothList=[],r.enable()}return n(e,[{key:"ngOnInit",value:function(){}},{key:"createCode",value:function(){this.createdCode=this.qrData,console.log(this.createdCode)}},{key:"scanCode",value:function(){var t=this;this.barcodeScanner.scan().then((function(e){t.scannedCode=e.text}))}},{key:"listPrinter",value:function(){var t=this;this.print.searchBluetoothPrinter().then((function(e){t.bluetoothList=e}))}},{key:"selectPrinter",value:function(t){this.selectedPrinter=t,this.modalController.dismiss(t)}},{key:"printStuff",value:function(){var t;t+="<table><tr><th>No</th> <th>Item</th> <th>Price</th></tr></table>",t+="<tr><td>1</td> <td>Dhoti Lungi Pagiti big name</td> <td>150</td></tr>",t+="<tr><td>1</td> <td>Dhoti </td> <td>250</td></tr>",t+="</table>",this.print.sendToBluetoothPrinter(this.selectedPrinter,t+="\n\n\n")}},{key:"dismiss",value:function(){this.modalController.dismiss()}}]),e}()).\u0275fac=function(t){return new(t||w)(l.Jb(f.a),l.Jb(x.a),l.Jb(c.b),l.Jb(f.a),l.Jb(D),l.Jb(c.G))},w.\u0275cmp=l.Db({type:w,selectors:[["app-barcode-generator"]],decls:13,vars:2,consts:[[1,"pull-right",3,"click"],[3,"click",4,"ngFor","ngForOf"],["expand","full","color","danger",3,"click"],[3,"click"]],template:function(t,e){1&t&&(l.Pb(0,"ion-header"),l.Pb(1,"ion-toolbar"),l.Pb(2,"ion-title"),l.vc(3," Find Printer "),l.Pb(4,"span",0),l.Xb("click",(function(){return e.dismiss()})),l.vc(5,"Close"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(6,"ion-content"),l.Pb(7,"ion-list"),l.uc(8,_,2,2,"ion-item",1),l.Ob(),l.Pb(9,"div"),l.vc(10),l.Ob(),l.Pb(11,"ion-button",2),l.Xb("click",(function(){return e.listPrinter()})),l.vc(12," Search Printer! "),l.Ob(),l.Ob()),2&t&&(l.xb(8),l.hc("ngForOf",e.bluetoothList),l.xb(2),l.xc(" Selected Printer: ",e.selectedPrinter," "))},directives:[c.n,c.C,c.B,c.k,c.s,a.j,c.f,c.q],styles:[""]}),w),I=i("2MiI");function T(t,e){if(1&t&&(l.Pb(0,"span"),l.vc(1),l.Ob()),2&t){var n=l.bc();l.xb(1),l.xc(" ",n.selectedPrinter,"")}}function R(t,e){1&t&&(l.Pb(0,"span"),l.vc(1,"Find Printer"),l.Ob())}function q(t,e){if(1&t){var n=l.Qb();l.Pb(0,"ion-card"),l.Kb(1,"ngx-qrcode",10,11),l.Pb(3,"ion-card-content"),l.Pb(4,"button",12),l.Xb("click",(function(){l.rc(n);var t=l.qc(2);return l.bc().printStuff(t)})),l.vc(5,"Print Receipt"),l.Ob(),l.Ob(),l.Ob()}if(2&t){var r=l.bc();l.xb(1),l.hc("value",r.createdCode)}}var j,B,J,M=[{path:"",component:(j=function(){function e(n,r,i,a,o,c,s){t(this,e),this.authService=n,this.stroageServices=r,this.router=i,this.alert=a,this.barcodeScanner=o,this.modalController=c,this.print=s,this.createdCode=null,this.scannedCode=null,this.userData={car_number:""}}return n(e,[{key:"ngOnInit",value:function(){this.gettingallAssign_orders()}},{key:"gettingallAssign_orders",value:function(){}},{key:"logout",value:function(){this.authService.logout()}},{key:"createCode",value:function(){var t=this;this.userData.car_number=this.qrData,this.authService.postData(this.userData,"enter_new_car").then((function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.resposeData=e,this.resposeData.car_details?(this.userdetails=this.resposeData.car_details,console.log(this.userdetails),this.alert.notification("Car has been carked","success"),this.createdCode=this.qrData):this.alert.notification(this.resposeData.error.text,"danger");case 1:case"end":return t.stop()}}),t,this)})))}),(function(e){t.alert.notification("No Internet Connection ","danger")}))}},{key:"scanCode",value:function(){var t=this;this.barcodeScanner.scan().then((function(e){t.scannedCode=e.text,t.userData.car_number=e.text})),this.authService.postData(this.userData,"get_car_details").then((function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.resposeData=e,this.resposeData.car_details?(this.userdetails=this.resposeData.car_details,this.router.navigateByUrl("/dashboard/car-details/"+this.userdetails.car_number)):this.alert.notification(this.resposeData.error.text,"danger");case 1:case"end":return t.stop()}}),t,this)})))}),(function(e){t.alert.notification("No Internet Connection ","danger")}))}},{key:"find_blutooth",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:S,cssClass:"findblue-tooth"});case 2:return(e=t.sent).onDidDismiss().then((function(t){console.log("data came back from modal"),console.log(t),n.selectedPrinter=t.data})),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"printStuff",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.qrcElement.nativeElement.querySelector("img").src,console.log(n),e.next=4,this.saveAsImage(t,this.userdetails.id);case 4:return r=e.sent,console.log(r),i="http://iflex.ng/car-parking-api/img/logo-small.jpg",i+=n,i+="\n\n\n",i+="IBOM Christmas Celebration",i+="\n\n\n",i+="Car No: ",i+=this.userdetails.car_number,i+="\n\n\n",i+="Time In: ",i+=this.userdetails.time_in,i+="Thank you and drive Safaly ",i+="\n\n\n",e.next=20,this.print.sendToBluetoothPrinter(this.selectedPrinter,i);case 20:case"end":return e.stop()}}),e,this)})))}},{key:"saveAsImage",value:function(t,e){var n=t.qrcElement.nativeElement.querySelector("img").src,r=this.convertBase64ToBlob(n);return this.readFile(r,"0",this.createFileName(),e)}},{key:"convertBase64ToBlob",value:function(t){for(var e=t.split(";base64,"),n=e[0].split(":")[1],r=window.atob(e[1]),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return new Blob([i],{type:n})}},{key:"createFileName",value:function(){return(new Date).getTime()+".jpg"}},{key:"readFile",value:function(t,e,n,r){var i=this,a=new FileReader;a.onload=function(){var o=new FormData,c=new Blob([a.result],{type:t.type});return o.append("file",c,n),o.append("user_id",e),o.append("carId",r),i.uploadImageData(o,t)},a.readAsArrayBuffer(t)}},{key:"uploadImageData",value:function(t,e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),this.authService.post_upload(t,"upload.php/signup_profile_upload").then((function(t){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.result22=t,!this.result22.qr_code_path){e.next=2;break}return e.abrupt("return",(console.log(this.result22.qr_code_path),this.result22.qr_code_path));case 2:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),j.\u0275fac=function(t){return new(t||j)(l.Jb(d.a),l.Jb(b.a),l.Jb(s.g),l.Jb(h.a),l.Jb(f.a),l.Jb(c.G),l.Jb(D))},j.\u0275cmp=l.Db({type:j,selectors:[["app-dashboard"]],decls:19,vars:7,consts:[[1,"container"],[1,"dashborard-icon"],[1,"pull-right",3,"click"],[4,"ngIf"],[1,"ion-padding"],["regiform","ngForm"],["type","text","placeholder","My QR data","name","qrData1","placeholder","Car Number","requied","",3,"ngModel","ngModelChange"],["qrData1","ngModel"],[3,"disabled","click"],["ion-button","","full","","icon-left","",3,"click"],[2,"width","100%",3,"value"],["parent",""],[1,"print-btn",3,"click"]],template:function(t,e){if(1&t&&(l.Kb(0,"app-header"),l.Pb(1,"ion-content"),l.Pb(2,"div",0),l.Pb(3,"div",1),l.Pb(4,"h3"),l.vc(5),l.Pb(6,"span",2),l.Xb("click",(function(){return e.find_blutooth()})),l.uc(7,T,2,1,"span",3),l.uc(8,R,2,0,"span",3),l.Ob(),l.Ob(),l.Pb(9,"div",4),l.Pb(10,"form",null,5),l.Pb(12,"ion-input",6,7),l.Xb("ngModelChange",(function(t){return e.qrData=t})),l.Ob(),l.Pb(14,"button",8),l.Xb("click",(function(){return e.createCode()})),l.vc(15," Create Ticket "),l.Ob(),l.Pb(16,"button",9),l.Xb("click",(function(){return e.scanCode()})),l.vc(17," Scan Code "),l.Ob(),l.Ob(),l.uc(18,q,6,1,"ion-card",3),l.Ob(),l.Ob(),l.Ob(),l.Ob()),2&t){var n=l.qc(11);l.xb(5),l.yc("Welcome ",null==e.userdetails?null:e.userdetails.first_name," ",null==e.userdetails?null:e.userdetails.last_name," "),l.xb(2),l.hc("ngIf",e.selectedPrinter),l.xb(1),l.hc("ngIf",!e.selectedPrinter),l.xb(4),l.hc("ngModel",e.qrData),l.xb(2),l.hc("disabled",n.invalid),l.xb(4),l.hc("ngIf",e.createdCode)}},directives:[I.a,c.k,a.k,o.t,o.k,o.l,c.p,c.L,o.j,o.m,c.h,p.b,c.i],styles:[""]}),j)},{path:"car-details/:id",component:C},{path:"profile",loadChildren:function(){return i.e(12).then(i.bind(null,"3cVy")).then((function(t){return t.ProfilePageModule}))}}],X=((B=function e(){t(this,e)}).\u0275mod=l.Hb({type:B}),B.\u0275inj=l.Gb({factory:function(t){return new(t||B)},imports:[[s.j.forChild(M)],s.j]}),B),F=i("j1ZV"),N=((J=function e(){t(this,e)}).\u0275mod=l.Hb({type:J}),J.\u0275inj=l.Gb({factory:function(t){return new(t||J)},imports:[[a.b,o.e,c.D,F.a,p.a,X]]}),J)},"2MiI":function(e,r,i){"use strict";i.d(r,"a",(function(){return c}));var a=i("fXoL"),o=i("TEn/"),c=function(){var e=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Db({type:e,selectors:[["app-header"]],decls:6,vars:1,consts:[[3,"translucent"],[1,"header"],["slot","start"],["src","../../../assets/img/header-logo.png"]],template:function(t,e){1&t&&(a.Pb(0,"ion-header",0),a.Pb(1,"ion-toolbar",1),a.Pb(2,"ion-buttons",2),a.Kb(3,"ion-menu-button"),a.Ob(),a.Pb(4,"ion-title"),a.Kb(5,"img",3),a.Ob(),a.Ob(),a.Ob()),2&t&&a.hc("translucent",!0)},directives:[o.n,o.C,o.g,o.u,o.B],styles:[""]}),e}()},j1ZV:function(e,n,r){"use strict";r.d(n,"a",(function(){return s}));var i=r("ofXK"),a=r("tyNb"),o=r("TEn/"),c=r("fXoL"),s=function(){var e=function e(){t(this,e)};return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[o.D,i.b,a.j],a.j]}),e}()}}])}();